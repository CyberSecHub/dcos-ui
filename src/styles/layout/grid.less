.grid {
  .visible-block;
  box-lines: multiple;
  flex-flow: row wrap;

  // this is useful when we want a grid to also behave as a .row
  // this removes the clearfix that gets created from adding .row
  // removing the clearfix allows flexbox to work the way it should
  &::before, &::after {
    display: none;
  }

  .grid-item {
    .visible-block;
    flex-flow: column wrap;
    .panel {
      display: flex;
      flex-direction: column;
      flex-grow: 1;

      .panel-content {
        display: flex;
        flex-grow: 1;
        flex-direction: column;

        > :first-child {
          flex-grow: 1;
        }
      }
    }
  }
}



/* Container */

.container {

  margin-left: @grid-container-fluid-gutter-width;
  margin-right: @grid-container-fluid-gutter-width;

  &.container-fluid.container-fluid-narrow {

    margin-left: @grid-container-fluid-gutter-width * 1.0;
    margin-right: @grid-container-fluid-gutter-width * 1.0;

  }

}

/* Screen Size: Mini (@screen-mini) and above */

& when (@screen-mini-enabled) {

	@media (min-width: @screen-mini) {

		/* Container */

    .container {

      margin-left: @grid-container-fluid-gutter-width-screen-mini;
      margin-right: @grid-container-fluid-gutter-width-screen-mini;

      &.container-fluid.container-fluid-narrow {

        margin-left: @grid-container-fluid-gutter-width-screen-mini * 0.5;
        margin-right: @grid-container-fluid-gutter-width-screen-mini * 0.5;

      }

    }

	}

}



/* Screen Size: Small (@screen-small) and above */

& when (@screen-small-enabled) {

	@media (min-width: @screen-small) {

    .grid {
      display: flex;

      .grid-item {
        display: flex;
      }
    }

		/* Container */

    .container {

      margin-left: @grid-container-fluid-gutter-width-screen-small;
      margin-right: @grid-container-fluid-gutter-width-screen-small;

      &.container-fluid.container-fluid-narrow {

        margin-left: @grid-container-fluid-gutter-width-screen-small * 0.5;
        margin-right: @grid-container-fluid-gutter-width-screen-small * 0.5;

      }

    }

	}

}



/* Screen Size: Medium (@screen-medium) and above */

& when (@screen-medium-enabled) {

	@media (min-width: @screen-medium) {

		/* Container */

    .container {

      margin-left: @grid-container-fluid-gutter-width-screen-medium;
      margin-right: @grid-container-fluid-gutter-width-screen-medium;

      &.container-fluid.container-fluid-narrow {

        margin-left: @grid-container-fluid-gutter-width-screen-medium * 0.5;
        margin-right: @grid-container-fluid-gutter-width-screen-medium * 0.5;

      }

    }

	}

}



/* Screen Size: Large (@screen-large) and above */

& when (@screen-large-enabled) {

	@media (min-width: @screen-large) {

    /* Container */

    .container {

      margin-left: @grid-container-fluid-gutter-width-screen-large;
      margin-right: @grid-container-fluid-gutter-width-screen-large;

      &.container-fluid.container-fluid-narrow {

        margin-left: @grid-container-fluid-gutter-width-screen-large * 0.5;
        margin-right: @grid-container-fluid-gutter-width-screen-large * 0.5;

      }

    }

	}

}
